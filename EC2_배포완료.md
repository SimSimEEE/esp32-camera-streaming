# ğŸ‰ EC2 ë°°í¬ ì™„ë£Œ

## ğŸ“Š ë°°í¬ í˜„í™©

### âœ… ë°°í¬ ì™„ë£Œ í•­ëª©

| í•­ëª©              | ìœ„ì¹˜           | ìƒíƒœ           | ì ‘ì† URL                |
| ----------------- | -------------- | -------------- | ----------------------- |
| **ì›¹ í´ë¼ì´ì–¸íŠ¸** | EC2 (nginx)    | âœ… ì‹¤í–‰ ì¤‘     | http://52.79.241.244/   |
| **Java ì„œë²„**     | EC2 (Docker)   | âœ… ì‹¤í–‰ ì¤‘     | ws://52.79.241.244:8887 |
| **ESP32 íŒì›¨ì–´**  | ë¡œì»¬ ë¹Œë“œ ì™„ë£Œ | â³ ì—…ë¡œë“œ ëŒ€ê¸° | -                       |

### ğŸ³ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ

```bash
CONTAINER                STATUS              PORTS
esp32-camera-client    Up 17 hours          0.0.0.0:80->80/tcp
esp32-camera-server    Up 17 hours          0.0.0.0:8887->8887/tcp
```

## ğŸ”§ í•„ìˆ˜ ì„¤ì •

### 1ï¸âƒ£ EC2 ë³´ì•ˆ ê·¸ë£¹ í™•ì¸

**ì¸ë°”ìš´ë“œ ê·œì¹™ì´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:**

| ìœ í˜•       | í”„ë¡œí† ì½œ | í¬íŠ¸ ë²”ìœ„ | ì†ŒìŠ¤      | ì„¤ëª…               |
| ---------- | -------- | --------- | --------- | ------------------ |
| HTTP       | TCP      | 80        | 0.0.0.0/0 | ì›¹ í´ë¼ì´ì–¸íŠ¸ ì ‘ì† |
| Custom TCP | TCP      | 8887      | 0.0.0.0/0 | WebSocket ì—°ê²°     |
| SSH        | TCP      | 22        | My IP     | ê´€ë¦¬ìš©             |

**ì„¤ì • ë°©ë²•:**

1. AWS Console â†’ EC2 â†’ ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ
2. "ë³´ì•ˆ" íƒ­ â†’ "ë³´ì•ˆ ê·¸ë£¹" í´ë¦­
3. "ì¸ë°”ìš´ë“œ ê·œì¹™ í¸ì§‘" â†’ ìœ„ ê·œì¹™ ì¶”ê°€

### 2ï¸âƒ£ ì›¹ ì ‘ì† í…ŒìŠ¤íŠ¸

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ URLë¡œ ì ‘ì†:

```
http://52.79.241.244/
```

**ê¸°ëŒ€ ê²°ê³¼:**

- ESP32 Camera Viewer í˜ì´ì§€ í‘œì‹œ
- Consoleì—ì„œ WebSocket ì—°ê²° ì‹œë„ ë¡œê·¸ í™•ì¸
- ESP32 ì—°ê²° ì‹œ ì˜ìƒ ìŠ¤íŠ¸ë¦¼ í‘œì‹œ

### 3ï¸âƒ£ ESP32 íŒì›¨ì–´ ì„¤ì •

**íŒŒì¼:** `esp32-camera-firmware/ESP32_Camera_Stream/Config.h`

```cpp
// WiFi ì„¤ì •
#define WIFI_SSID "Your_WiFi_SSID"
#define WIFI_PASSWORD "Your_WiFi_Password"

// WebSocket ì„œë²„ ì„¤ì •
#define WS_HOST "52.79.241.244"  // â† EC2 ê³µì¸ IP
#define WS_PORT 8887
#define WS_PATH "/esp32"
```

**ì—…ë¡œë“œ ë°©ë²•:**

```bash
cd esp32-camera-firmware
pio run --target upload
```

## ğŸŒ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ESP32-CAM  â”‚ â”€â”€ws://52.79.241.244:8887/esp32â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
                                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚ â”€http://52.79.241.244â”€â”€â–¶ â”‚   EC2 Instance  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  52.79.241.244  â”‚
        â”‚                                â”‚                 â”‚
        â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â””â”€â”€â”€ws://.../ws/viewerâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   nginx    â”‚ â”‚
                                         â”‚  â”‚   :80      â”‚ â”‚
                                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                         â”‚        â”‚        â”‚
                                         â”‚        â”‚ proxy â”‚
                                         â”‚        â–¼        â”‚
                                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                         â”‚  â”‚Java Server â”‚ â”‚
                                         â”‚  â”‚   :8887    â”‚ â”‚
                                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ì„œë²„ ë¡œê·¸ í™•ì¸

### Java ì„œë²„ ë¡œê·¸

```bash
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker logs esp32-camera-server --tail 50"
```

**ì •ìƒ ë™ì‘ ì‹œ:**

```
Received frame from ESP32: 8151 bytes
Broadcasted frame to N web clients
```

### nginx ë¡œê·¸

```bash
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker logs esp32-camera-client --tail 50"
```

## ğŸ”„ ì¬ë°°í¬ ë°©ë²•

### ì„œë²„ ì¬ë°°í¬

```bash
# ìµœì‹  ì´ë¯¸ì§€ë¡œ ì—…ë°ì´íŠ¸
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker stop esp32-camera-server && \
   docker rm esp32-camera-server && \
   docker run -d --name esp32-camera-server \
     --restart unless-stopped \
     -p 8887:8887 \
     ec2-user-camera-server:latest"
```

### í´ë¼ì´ì–¸íŠ¸ ì¬ë°°í¬

```bash
# nginx ì¬ì‹œì‘
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker restart esp32-camera-client"
```

## ğŸ› ë¬¸ì œ í•´ê²°

### 1. ì›¹ í˜ì´ì§€ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ

```bash
# nginx ìƒíƒœ í™•ì¸
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker ps | grep esp32-camera-client"

# ë¡œê·¸ í™•ì¸
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker logs esp32-camera-client"
```

**í•´ê²° ë°©ë²•:**

- EC2 ë³´ì•ˆ ê·¸ë£¹ì—ì„œ í¬íŠ¸ 80 ì¸ë°”ìš´ë“œ ê·œì¹™ í™•ì¸
- ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ í™•ì¸ (Running)
- nginx ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

### 2. WebSocket ì—°ê²° ì‹¤íŒ¨

```bash
# Java ì„œë²„ ìƒíƒœ í™•ì¸
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "docker ps | grep esp32-camera-server"

# í¬íŠ¸ í™•ì¸
ssh -i /Users/sim-ugeun/Downloads/my-key.pem ec2-user@52.79.241.244 \
  "netstat -tlnp | grep 8887"
```

**í•´ê²° ë°©ë²•:**

- EC2 ë³´ì•ˆ ê·¸ë£¹ì—ì„œ í¬íŠ¸ 8887 ì¸ë°”ìš´ë“œ ê·œì¹™ í™•ì¸
- ë¸Œë¼ìš°ì € Consoleì—ì„œ WebSocket ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
- Java ì„œë²„ ë¡œê·¸ í™•ì¸

### 3. ESP32 ì—°ê²° ì•ˆë¨

**í™•ì¸ ì‚¬í•­:**

1. ESP32 WiFi ì—°ê²° í™•ì¸
2. Config.hì˜ ì„œë²„ ì£¼ì†Œ í™•ì¸
3. EC2 ë³´ì•ˆ ê·¸ë£¹ì—ì„œ 8887 í¬íŠ¸ í™•ì¸
4. Java ì„œë²„ ë¡œê·¸ì—ì„œ ESP32 ì—°ê²° ì‹œë„ í™•ì¸

## ğŸ“– ê´€ë ¨ ë¬¸ì„œ

- [ë°°í¬ ê°€ì´ë“œ](DEPLOY_GUIDE.md) - ì „ì²´ ë°°í¬ í”„ë¡œì„¸ìŠ¤
- [ë°°í¬ ì¤€ë¹„](ë°°í¬ì¤€ë¹„ì™„ë£Œ.md) - ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­
- [README](README.md) - í”„ë¡œì íŠ¸ ê°œìš”

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

- [ ] EC2 ë³´ì•ˆ ê·¸ë£¹ ì„¤ì • í™•ì¸
- [ ] http://52.79.241.244/ ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] ESP32 Config.h ì—…ë°ì´íŠ¸
- [ ] ESP32 íŒì›¨ì–´ ì—…ë¡œë“œ
- [ ] ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸

---

**ë°°í¬ ì™„ë£Œ:** 2025-02-18  
**EC2 ì¸ìŠ¤í„´ìŠ¤:** i-0c0ae63bb9931b3ed (52.79.241.244)  
**ë¦¬ì „:** ap-northeast-2 (ì„œìš¸)
